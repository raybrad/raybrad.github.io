<!DOCTYPE html>  
<html lang="en">
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Parsing JSON with Ruby</title>
  <meta name="description" content="Parsing JSON with Ruby is actually extremely easy. All you have to do is have the json gem installed (gem install json) and call the JSON.parse method on the...">
  <link rel="stylesheet" type="text/css" href="http://raybrad.github.io/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="http://raybrad.github.io/css/animate.css" />
  <link rel="stylesheet" type="text/css" href="http://raybrad.github.io/css/normalize.css" />
  <link rel="stylesheet" type="text/css" href="http://raybrad.github.io/css/linecons.css" />
  <link rel="stylesheet" type="text/css" href="http://raybrad.github.io/css/font-awesome.min.css" />
  <link rel="stylesheet" type="text/css" href="http://raybrad.github.io/css/syntax.css" />
  <link rel="stylesheet" type="text/css" href="http://raybrad.github.io/css/home.css" />
  <link rel="stylesheet" type="text/css" href="http://raybrad.github.io/css/style.css" />
    
  <!-- CSS | Google Fonts -->
  <link href='http://fonts.googleapis.com/css?family=Montserrat:400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Raleway:200,400,300,500,600' rel='stylesheet' type='text/css'>
  
</head>

<body>
<div class="custom-container">
  <div class="custom-header">
    <div id="logo">
      <img src="/images/logo.png" alt="logo" width='50px' height='50px'/>
    </div>
    <div id='pageTitle'>
       <h1> 风语柳河岸</h1>
    </div>
</div>

  <div class="custom-mid-layer">
     <div class="custom-menu">
   <ul>
        
        <li class="page-link"><a href="http://raybrad.github.io/freeMind.html">逍遥游</a></li>
        
        <li class="page-link"><a href="http://raybrad.github.io/inWorld.html">人间世</a></li>
        
        
        
        <li class="page-link"><a href="http://raybrad.github.io/life.html">养生主</a></li>
        
        <li class="page-link"><a href="http://raybrad.github.io/travel.html">知北游</a></li>
        
   </ul>
</div>

     <div class="custom-main" >
                    <div class="boxwrap article">
      <div class="cont-content">
         <div class="angle"></div>
         <div class="cont-top">
             <div class="cont">
                     <h2 class="data"><a href="">2015.10.12</a></h2>
             </div>
          </div>
          <div class="cont-mid">
             <div class="cont">
                  <div class="post-header">
                    <h1 class="post-title">Parsing JSON with Ruby</h1>
                    <p class="post-meta">Dec 23, 2013</p>
                  </div>
                  <div class="text">
                    <p>Parsing JSON with Ruby is actually extremely easy. All you have to do is have the json gem installed (<code>gem install json</code>) and call the <code>JSON.parse</code> method on the JSON data to convert it to ruby hashes. If you look at this small program here, you can see how I have implemented parsing JSON in Ruby.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1">#!/usr/bin/env ruby</span>

<span class="nb">require</span> <span class="s1">&#39;json&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;net/http&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;libnotify&#39;</span>

<span class="k">def</span> <span class="nf">parsejson</span>
    <span class="n">file</span> <span class="o">=</span> <span class="s2">&quot;http://api.openweathermap.org/data/2.5/find?q=London&amp;mode=json&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="no">URI</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
    <span class="n">weatherjson</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">body</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="no">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">weatherjson</span><span class="p">)</span>

    <span class="c1"># check for errors</span>
    <span class="k">if</span> <span class="n">actual</span><span class="o">.</span><span class="n">has_key?</span> <span class="s1">&#39;Error&#39;</span>
        <span class="k">raise</span> <span class="s2">&quot;error with the url&quot;</span>
    <span class="k">end</span>

    <span class="n">results</span> <span class="o">=</span> <span class="o">[]</span>

    <span class="n">actual</span><span class="o">[</span><span class="s2">&quot;list&quot;</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">listitem</span><span class="o">|</span>
        <span class="n">weather</span> <span class="o">=</span> <span class="n">listitem</span><span class="o">[</span><span class="s2">&quot;weather&quot;</span><span class="o">]</span>
        <span class="n">weather</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">weath</span><span class="o">|</span>
            <span class="n">results</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">weath</span><span class="o">[</span><span class="s2">&quot;description&quot;</span><span class="o">]</span><span class="p">)</span>
        <span class="k">end</span>
        <span class="n">main</span> <span class="o">=</span> <span class="n">listitem</span><span class="o">[</span><span class="s2">&quot;main&quot;</span><span class="o">]</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">main</span><span class="o">[</span><span class="s2">&quot;temp&quot;</span><span class="o">]</span> <span class="o">-</span> <span class="mi">273</span><span class="o">.</span><span class="mi">15</span>
        <span class="n">results</span><span class="o">.</span><span class="n">push</span> <span class="p">(</span><span class="s2">&quot;%.2f&quot;</span> <span class="o">%</span> <span class="n">temp</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="k">return</span> <span class="n">results</span>
<span class="k">end</span></code></pre></div>




                  </div>
            </div>             
          </div>
      </div>
      <div class="cont-bot">
         <div class="cont-bot-r">
             <div class="cont-bot-m">
                 <div class="cont-bot-sl"></div>
                 <div class="cont-bot-sr"></div>
             </div>
         </div>
     </div>
</div>

     </div>
 </div>
 <div class="custom-footer">
	<div id="words">
		<ul class="word-container">
			<li data-author="---  Abraham Lincoln (1809 - 1865), (attributed)">
			When I do good, I feel good; when I do bad, I feel bad, and that is 
			my religion. </li>
			<li data-author="---  John Wanamaker (1838 - 1922), (attributed)">
			Half the money I spend on advertising is wasted; the trouble is I 
			don&#39;t know which half. </li>
			<li data-author="---  Morrie Schwartz" data-easeout="lightSpeedOut">
			The most important thing in life is to learn how to give out love, 
			and to let it come in. </li>
			<li data-author="">所 有 的 瞬 间 都 会 淹 没 于 时 间 的 洪 流，就 像 泪 水 消 逝 在 雨 中。 
			All those moments will be lost in time, like tears in rain.</li>
			<li data-author="Mark Twain (1835 - 1910)" data-easein="fadeInDown">
			Always do right. This will gratify some people and astonish the 
			rest. </li>
			<li data-author="---  Susan Rice, Stanford University Commencement, 2010" data-easeout="bounceOut">
			Progress is the product of human agency. Things get better because 
			we make them better. Things go wrong when we get too comfortable, 
			when we fail to take risks or seize opportunities. </li>
			<li data-author="---  Arlo Guthrie (1947 - )" data-easein="bounceIn">
			You can&#39;t have a light without a dark to stick it in. </li>
			<li data-author="---  Mahatma Gandhi (1869 - 1948)" data-easein="lightSpeedIn">
			You must not lose faith in humanity. Humanity is an ocean; if a few 
			drops of the ocean are dirty, the ocean does not become dirty. </li>
		</ul>
		<div class="quote">
			<blockquote>
			  <p class="quote-content"></p>
			</blockquote>
			<cite class="quote-author"></cite>
		</div>
	</div>
</div>

</div>
  <script type="text/javascript" src="http://raybrad.github.io/js/jquery.js"></script>
<script type="text/javascript" src="http://raybrad.github.io/js/jquery.quoterotator.min.js"></script>
<script type="text/javascript" src="http://raybrad.github.io/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://raybrad.github.io/js/pace.js"></script>
<script type="text/javascript" src="http://raybrad.github.io/js/home.js"></script>

</body>
</html>
